# 樹結構合併算法說明

## 1. 基本資料結構

### TreeNode 類別
- 每個節點包含一個值(val)和子節點列表(children)
- 用於建構樹狀結構的基本單位

## 2. 主要功能函數

### 2.1 樹的建立 (create_tree1, create_tree2)
- 分別建立兩種不同分類邏輯的醫學美容樹狀結構
- Tree1: 以治療方式為主的分類 
- Tree2: 以治療部位為主的分類

### 2.2 樹的合併 (merge_trees)
合併演算法的主要步驟:

1. 初始化:
   - 建立一個集合用於追蹤共同節點
   - 使用 merged_nodes 集合避免重複處理節點

2. 合併邏輯:
   - 如果節點為空，返回非空節點
   - 如果節點已經合併過，直接返回
   - 建立新的合併節點
   - 標記共同節點(出現在兩棵樹中的節點)

3. 子節點處理:
   - 使用集合追蹤已處理的子節點值
   - 先處理第一棵樹的子節點
   - 再處理第二棵樹的獨特子節點
   - 遞迴合併對應的子節點

### 2.3 輔助功能
- print_tree_visual: 視覺化顯示樹結構，標記共同節點
- save_tree_to_file: 將樹結構保存到文件
- load_tree_from_file: 從文件讀取樹結構

## 3. 合併策略

1. 節點匹配:
   - 根據節點值判斷是否為相同節點
   - 保留所有獨特節點
   - 標記重複出現的節點為共同節點

2. 結構保持:
   - 維持原有的層級關係
   - 保留兩棵樹的完整資訊
   - 避免資訊丟失

3. 衝突處理:
   - 當遇到相同節點時，合併其子節點
   - 保留所有不重複的子節點
   - 確保最終樹結構的完整性

## 4. 應用場景

此算法特別適用於:
- 合併不同分類邏輯的樹狀結構
- 識別和標記共同概念
- 保留各自分類系統的特點
- 建立更完整的知識體系

## 5. 效能考量

- 時間複雜度: O(n1 + n2)，其中 n1、n2 為兩棵樹的節點數
- 空間複雜度: O(n)，其中 n 為合併後樹的節點數
- 使用集合(Set)優化節點查找
- 避免重複處理相同節點


## 範例 (主體元素合併)

```

第一棵樹 (治療方式分類):
└── 醫學美容
    ├── 非侵入性治療
    │   ├── 雷射治療
    │   │   ├── 除斑雷射
    │   │   ├── 除毛雷射
    │   │   └── 緊膚雷射
    │   └── 注射治療
    │       ├── 玻尿酸
    │       └── 肉毒桿菌
    └── 侵入性治療

第二棵樹 (治療部位分類):
└── 醫學美容
    ├── 臉部治療
    │   ├── 注射治療
    │   ├── 臉部拉提
    │   └── 除斑雷射
    └── 身體治療
        ├── 體雕
        └── 除毛雷射

合併後的樹 (標記 [*] 為共同節點):
└── 醫學美容 [*]
    ├── 非侵入性治療
    │   ├── 雷射治療
    │   │   ├── 除斑雷射 [*]
    │   │   ├── 除毛雷射 [*]
    │   │   └── 緊膚雷射
    │   └── 注射治療 [*]
    │       ├── 玻尿酸
    │       └── 肉毒桿菌
    ├── 侵入性治療
    ├── 臉部治療 [*]
    │   ├── 注射治療 [*]
    │   ├── 臉部拉提 [*]
    │   └── 除斑雷射 [*]
    └── 身體治療 [*]
        ├── 體雕 [*]
        └── 除毛雷射 [*]

第三棵樹 (從文件讀取):
└── 醫學美容
    ├── 非侵入性治療
    │   ├── 光療
    │   │   ├── 彩光治療
    │   │   └── LED治療
    │   └── 注射治療
    │       ├── 玻尿酸
    │       ├── 肉毒桿菌
    │       └── 玻尿酸填充
    └── 營養治療
        ├── 維他命點滴
        └── 抗氧化治療

前兩棵樹合併結果 (標記 [*] 為共同節點):
└── 醫學美容 [*]
    ├── 非侵入性治療
    │   ├── 雷射治療
    │   │   ├── 除斑雷射 [*]
    │   │   ├── 除毛雷射 [*]
    │   │   └── 緊膚雷射
    │   └── 注射治療 [*]
    │       ├── 玻尿酸
    │       └── 肉毒桿菌
    ├── 侵入性治療
    ├── 臉部治療 [*]
    │   ├── 注射治療 [*]
    │   ├── 臉部拉提 [*]
    │   └── 除斑雷射 [*]
    └── 身體治療 [*]
        ├── 體雕 [*]
        └── 除毛雷射 [*]

最終合併結果 (標記 [*] 為共同節點):
└── 醫學美容 [*]
    ├── 非侵入性治療 [*]
    │   ├── 雷射治療
    │   │   ├── 除斑雷射
    │   │   ├── 除毛雷射
    │   │   └── 緊膚雷射
    │   ├── 注射治療 [*]
    │   │   ├── 玻尿酸 [*]
    │   │   ├── 肉毒桿菌 [*]
    │   │   └── 玻尿酸填充 [*]
    │   └── 光療 [*]
    │       ├── 彩光治療 [*]
    │       └── LED治療 [*]
    ├── 侵入性治療
    ├── 臉部治療
    │   ├── 注射治療 [*]
    │   ├── 臉部拉提
    │   └── 除斑雷射
    ├── 身體治療
    │   ├── 體雕
    │   └── 除毛雷射
    └── 營養治療 [*]
        ├── 維他命點滴 [*]
        └── 抗氧化治療 [*]
```

## 範例二 (利益元素合併)

```
獲利模式分類樹:
└── 醫美商業評價
    ├── 直接營收
    │   ├── 療程收費
    │   │   ├── 單次療程
    │   │   └── 療程組合
    │   └── 產品銷售
    │       ├── 術後保養品
    │       └── 居家護理品
    └── 間接效益
        ├── 客戶忠誠度
        │   ├── 回購率
        │   └── 推薦率
        └── 品牌價值
            ├── 市場口碑
            └── 專業形象

市場價值分類樹:
└── 醫美商業評價
    ├── 市場競爭力
    │   ├── 價格優勢
    │   │   ├── 單次療程
    │   │   └── 療程組合
    │   └── 服務品質
    │       ├── 專業技術
    │       └── 客戶體驗
    └── 成長潛力
        ├── 市場佔有率
        │   ├── 實體診所
        │   └── 線上通路
        └── 品牌影響力
            ├── 市場口碑
            └── 社群聲量

合併後的商業評價樹 (標記 [*] 為共同節點):
└── 醫美商業評價 [*]
    ├── 直接營收
    │   ├── 療程收費
    │   │   ├── 單次療程 [*]
    │   │   └── 療程組合 [*]
    │   └── 產品銷售
    │       ├── 術後保養品
    │       └── 居家護理品
    ├── 間接效益
    │   ├── 客戶忠誠度
    │   │   ├── 回購率
    │   │   └── 推薦率
    │   └── 品牌價值
    │       ├── 市場口碑 [*]
    │       └── 專業形象
    ├── 市場競爭力 [*]
    │   ├── 價格優勢 [*]
    │   │   ├── 單次療程 [*]
    │   │   └── 療程組合 [*]
    │   └── 服務品質 [*]
    │       ├── 專業技術 [*]
    │       └── 客戶體驗 [*]
    └── 成長潛力 [*]
        ├── 市場佔有率 [*]
        │   ├── 實體診所 [*]
        │   └── 線上通路 [*]
        └── 品牌影響力 [*]
            ├── 市場口碑 [*]
            └── 社群聲量 [*]
```
